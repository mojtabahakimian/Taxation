<Window x:Class="Prg_TrackSentInvoice.WIN_MODIFYINVOICE"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Prg_TrackSentInvoice"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        FontFamily="pack://application:,,,/Prg_Graphicy;component/UIY/FNT/#IRANYekanFN"
        WindowStartupLocation="CenterScreen" Loaded="Window_Loaded" PreviewKeyDown="Window_PreviewKeyDown"
        Title="ایجاد صورتحساب اصلاحی / برگشتی / ابطالی" d:Width="7000" Height="768" Width="1024">
    <Window.Resources>
        <ItemsPanelTemplate x:Key="VSP">
            <VirtualizingStackPanel VirtualizingPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"  VirtualizingPanel.VirtualizationMode="Recycling"/>
        </ItemsPanelTemplate>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Tag="0" Height="Auto"/>
            <RowDefinition Tag="1" Height="Auto"/>
            <RowDefinition Tag="2" MinHeight="5"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="10">
            <Border CornerRadius="5,5,0,0" Background="#F20EB1E8" Padding="5" SnapsToDevicePixels="True">
                <Label x:Name="HEADER_LABEL" Content="سربرگ صورت حساب Header" FontWeight="Bold" FlowDirection="RightToLeft" FontSize="14" Foreground="#DDFFFFFF" Background="Transparent"/>
            </Border>
            <DataGrid x:Name="DG_HEAD_INVOICE" RowHeight="50" Height="110" MaxHeight="110" RowEditEnding="DG_HEAD_INVOICE_RowEditEnding" d:ItemsSource="{d:SampleData ItemCount=1}" ItemsSource="{Binding TAXDTL_DATA}" AutoGenerateColumns="False" FlowDirection="RightToLeft" VerticalScrollBarVisibility="Hidden" SelectionMode="Single" SelectionUnit="FullRow" CanUserAddRows="False" CanUserDeleteRows="False">
                <DataGrid.Style>
                    <!--خط بندی سطر های دیتاگرید-->
                    <Style TargetType="{x:Type DataGrid}" BasedOn="{StaticResource MaterialDesignDataGrid}">
                        <Setter Property="materialDesign:DataGridAssist.EnableEditBoxAssist" Value="False"/>
                        <Setter Property="GridLinesVisibility" Value="All"/>
                    </Style>
                </DataGrid.Style>
                <DataGrid.Columns>
                    <DataGridTextColumn x:Name="taxidColumn" Visibility="Hidden" Binding="{Binding Taxid}" IsReadOnly="True" Header="شماره منحصر به فرد مالیاتی Taxid" Width="auto"/>
                    <DataGridTemplateColumn Header="نوع صورت حساب Inty" Width="auto" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Inty}" Value="1">
                                                    <Setter Property="Text" Value="نوع اول" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inty}" Value="2">
                                                    <Setter Property="Text" Value="نوع دوم" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inty}" Value="3">
                                                    <Setter Property="Text" Value="نوع سوم" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="الگوی صورت حساب Inp" Width="auto" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Inp}" Value="1">
                                                    <Setter Property="Text" Value="فروش" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inp}" Value="2">
                                                    <Setter Property="Text" Value="فروش ارزی" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inp}" Value="3">
                                                    <Setter Property="Text" Value="صورت حساب طلا , جواهر و پلاتین" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inp}" Value="4">
                                                    <Setter Property="Text" Value="پیمانکاری" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inp}" Value="5">
                                                    <Setter Property="Text" Value="قبوض خدماتی" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inp}" Value="6">
                                                    <Setter Property="Text" Value="هواپیما" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Inp}" Value="7">
                                                    <Setter Property="Text" Value="صادرات" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridComboBoxColumn x:Name="INS_COLUMN" Width="auto" Header="موضوع صورت حساب Ins" SelectedValueBinding="{Binding Ins,UpdateSourceTrigger=LostFocus}" DisplayMemberPath="NAME" SelectedValuePath="ID">
                        <DataGridComboBoxColumn.EditingElementStyle>
                            <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource MaterialDesignComboBox}">
                                <Setter Property="IsEditable" Value="True"/>
                                <Setter Property="ItemsPanel" Value="{StaticResource VSP}"/>
                                <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
                                <Setter Property="VirtualizingPanel.IsVirtualizing" Value="True"/>
                                <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>
                            </Style>
                        </DataGridComboBoxColumn.EditingElementStyle>
                    </DataGridComboBoxColumn>

                    <DataGridComboBoxColumn x:Name="TOB_COLUMN" Width="auto" IsReadOnly="True" Header="نوع شخص خریدار Tob" SelectedValueBinding="{Binding Tob,UpdateSourceTrigger=LostFocus}" DisplayMemberPath="NAMES" SelectedValuePath="CODE">
                        <DataGridComboBoxColumn.EditingElementStyle>
                            <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource MaterialDesignComboBox}">
                                <Setter Property="IsEditable" Value="True"/>
                                <Setter Property="ItemsPanel" Value="{StaticResource VSP}"/>
                                <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
                                <Setter Property="VirtualizingPanel.IsVirtualizing" Value="True"/>
                                <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>
                            </Style>
                        </DataGridComboBoxColumn.EditingElementStyle>
                    </DataGridComboBoxColumn>
                    <DataGridTextColumn x:Name="IRTAXID_COLUMN" Binding="{Binding Irtaxid,UpdateSourceTrigger=LostFocus}" Header="شماره صورت حساب مرجع Irtaxid" Width="auto"/>

                    <DataGridTextColumn x:Name="innoColumn" Binding="{Binding Inno,UpdateSourceTrigger=LostFocus}" Header="شماره حواله داخلی Inno" Width="auto"/>
                    <DataGridTextColumn  Binding="{Binding DATE_N,UpdateSourceTrigger=LostFocus , StringFormat=####/##/##}" Header="تاریخ (داخلی) حواله " Width="auto" IsReadOnly="True" />

                    <DataGridTextColumn Binding="{Binding Tprdis,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع مبلغ قبل از کسر تخفیف Tprdis" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Tdis,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع تخفیفات Tdis" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Tadis,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع مبلغ پس از کسر تخفیف Tadis" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Tvam,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع مالیات بر ارزش افزوده Tvam" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Todam,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع سایر مالیات‌ها و عوارض Todam" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Tbill,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع صورتحساب Tbill" Width="auto" IsReadOnly="True" />

                    <DataGridComboBoxColumn x:Name="SETM_COLUMN" Width="auto" Header="روش تسویه Setm" SelectedValueBinding="{Binding Setm,UpdateSourceTrigger=LostFocus}" DisplayMemberPath="NAME" SelectedValuePath="ID">
                        <DataGridComboBoxColumn.EditingElementStyle>
                            <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource MaterialDesignComboBox}">
                                <Setter Property="IsEditable" Value="True"/>
                                <Setter Property="ItemsPanel" Value="{StaticResource VSP}"/>
                                <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
                                <Setter Property="VirtualizingPanel.IsVirtualizing" Value="True"/>
                                <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>
                            </Style>
                        </DataGridComboBoxColumn.EditingElementStyle>
                    </DataGridComboBoxColumn>

                    <DataGridTextColumn Binding="{Binding Cap,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مبلغ پرداختی نقدی Cap" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Insp,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مبلغ نسیه Insp" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Tvop,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع سهم مالیات از پرداخت Tvop" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Sbc,UpdateSourceTrigger=LostFocus}" Header="کد شعبه فروشنده Sbc" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Tins,UpdateSourceTrigger=LostFocus}" Header="شماره اقتصادی فروشنده Tins" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Tax17,UpdateSourceTrigger=LostFocus}" Header="Tax17" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Cdcd,UpdateSourceTrigger=LostFocus}" Header="تاریخ کوتاژ اظهارنامه گمرکی Cdcd" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Tonw,UpdateSourceTrigger=LostFocus}" Header="مجموع وزن خالص Tonw" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Torv,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع ارزش ریالی Torv" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding Tocv,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مجموع ارزش ارزی Tocv" Width="auto"/>
                    <DataGridTextColumn  Binding="{Binding Bid,UpdateSourceTrigger=LostFocus , StringFormat=####/##/##}" Header="شناسه افراد Bid" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn  Binding="{Binding Tinb,UpdateSourceTrigger=LostFocus , StringFormat=####/##/##}" Header="شماره اقتصادی خریدار Tinb" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn  Binding="{Binding Bpc ,UpdateSourceTrigger=LostFocus, StringFormat=####/##/##}" Header="کد پستی خریدار Bpc" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="PersianCrtColumn" Binding="{Binding PersianCRT,UpdateSourceTrigger=LostFocus}" Header="تاریخ ارسال شمسی" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="CrtColumn" Binding="{Binding CRT}" Header="تاریخ ارسال میلادی" Width="auto" IsReadOnly="True" />

                    <DataGridTextColumn Binding="{Binding Scln,UpdateSourceTrigger=LostFocus}" Header="شماره پروانه گمرکی Scln" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Scc,UpdateSourceTrigger=LostFocus}" Header="کد گمرک محل اظهار فروشنده Scc" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Crn,UpdateSourceTrigger=LostFocus}" Header="شناسه یکتای ثبت قرارداد فروشنده Crn" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Billid,UpdateSourceTrigger=LostFocus}" Header="شماره اشتراک / شناسه قبض بهره‌بردار Billid" Width="auto"/>
                    <DataGridTextColumn x:Name="SentTaxMemoryColumn" Binding="{Binding SentTaxMemory,UpdateSourceTrigger=LostFocus}" Header="حافظه مالیاتی ارسالی"  IsReadOnly="True"  Width="auto"/>
                    <DataGridTextColumn Binding="{Binding Bpn,UpdateSourceTrigger=LostFocus}" Header="شماره گذرنامه خریدار Bpn" IsReadOnly="True" Width="auto"/>
                    <DataGridTemplateColumn Header="ارسال شده به سامانه" Width="auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ApiTypeSent}" Value="0">
                                                    <Setter Property="Text" Value="آزمایشی" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ApiTypeSent}" Value="1">
                                                    <Setter Property="Text" Value="اصلی" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ApiTypeSent}" Value="False">
                                                    <Setter Property="Text" Value="آزمایشی" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ApiTypeSent}" Value="True">
                                                    <Setter Property="Text" Value="اصلی" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn x:Name="refrenceNumberColumn" Binding="{Binding RefrenceNumber}" Header="Refrence Number شناسه صورت حساب" Width="auto" IsReadOnly="True" />
                    <DataGridTemplateColumn Header="وضعیت" Width="auto" IsReadOnly="True">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding TheStatus}" Value="FAILED">
                                                    <Setter Property="Text" Value="ناموفق" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding TheStatus}" Value="PENDING">
                                                    <Setter Property="Text" Value="در انتظار" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding TheStatus}" Value="IN_PROGRESS">
                                                    <Setter Property="Text" Value="در حال پردازش" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding TheStatus}" Value="SUCCESS">
                                                    <Setter Property="Text" Value="موفق" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding TheStatus}" Value="EXPIRED">
                                                    <Setter Property="Text" Value="منقضی شده" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <GridSplitter Grid.Row="1" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Center" Background="#FF1F1F1F"/>

        <Grid Grid.Row="2" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- عنوان -->
                <RowDefinition Height="5"/>
                <!-- GridSplitter -->
                <RowDefinition Height="*"/>
                <!-- DataGrid resizable -->
                <RowDefinition Height="Auto"/>
                <!-- Totals + Button -->
            </Grid.RowDefinitions>

            <Border Grid.Row="0" CornerRadius="5,5,0,0" Background="#F20EB1E8" Padding="5" SnapsToDevicePixels="True">
                <Label Content="جزئیات سطر صورت حساب Body"
               FontWeight="Bold" FlowDirection="RightToLeft"
               FontSize="14" Foreground="#DDFFFFFF"
               Background="Transparent"/>
            </Border>

            <!-- ===== Splitter ===== -->
            <GridSplitter Grid.Row="1"
                  Height="5"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Center"
                  Background="#FF1F1F1F"/>

            <DataGrid Grid.Row="2" d:ItemsSource="{d:SampleData}"
              x:Name="DG_BODY_INVOICE"
              ItemsSource="{Binding TAXDTL_DATA}"
              AutoGenerateColumns="False"
              FlowDirection="RightToLeft"
              SelectionMode="Extended"
              SelectionUnit="FullRow"
              VerticalAlignment="Stretch"
              HorizontalAlignment="Stretch"
              VerticalScrollBarVisibility="Auto" RowEditEnding="DG_BODY_INVOICE_RowEditEnding" PreviewKeyDown="DG_BODY_INVOICE_PreviewKeyDown"
              CanUserAddRows="False">
                <DataGrid.Style>
                    <Style TargetType="{x:Type DataGrid}" BasedOn="{StaticResource MaterialDesignDataGrid}">
                        <Setter Property="materialDesign:DataGridAssist.EnableEditBoxAssist" Value="False"/>
                        <Setter Property="GridLinesVisibility" Value="All"/>
                    </Style>
                </DataGrid.Style>
                <DataGrid.Columns>
                    <DataGridTextColumn x:Name="rownumberColumn_body" Binding="{Binding IDD,UpdateSourceTrigger=PropertyChanged}" Header="ردیف" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="ssttColumn" Binding="{Binding Sstt,UpdateSourceTrigger=LostFocus}" Header=" شرح كالا/خدمت Sstt" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="sstidColumn" Binding="{Binding Sstid,UpdateSourceTrigger=LostFocus}" Header="شناسه كالا/خدمت Sstid" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="amColumn" Binding="{Binding Am,UpdateSourceTrigger=LostFocus,StringFormat=\{0:N\}}" Header="تعداد/مقدار Am" Width="auto"/>
                    <DataGridTextColumn Binding="{Binding NAME_VAHED,UpdateSourceTrigger=LostFocus}" Header="واحد" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="muColumn" Binding="{Binding Mu,UpdateSourceTrigger=LostFocus}" Header="کد واحد کالا مودیان" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="feeColumn" Binding="{Binding Fee,UpdateSourceTrigger=LostFocus, StringFormat='{}{0:#,#.}'}" Header="مبلغ واحد Fee" Width="auto"/>
                    <DataGridTextColumn x:Name="tsstamColumn" Binding="{Binding Tsstam,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مبلغ كل كالا/خدمت Tsstam" Width="auto"/>
                    <DataGridTextColumn x:Name="prdisColumn" Binding="{Binding Prdis,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header=" مبلغ قبل از تخفیف Prdis" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="disColumn" Binding="{Binding Dis,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مبلغ تخفیف Dis" Width="auto"/>
                    <DataGridTextColumn x:Name="adisColumn" Binding="{Binding Adis,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header=" مبلغ بعد از تخفیف Adis" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="vraColumn" Binding="{Binding Vra,UpdateSourceTrigger=LostFocus}" Header="نرخ مالیات بر ارزش افزوده Vra" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="vamColumn" Binding="{Binding Vam,UpdateSourceTrigger=LostFocus,StringFormat='{}{0:#,#.}'}" Header="مبلغ مالیات بر ارزش افزوده Vam" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="exrColumn" Binding="{Binding Exr,UpdateSourceTrigger=LostFocus}" Header="نرخ برابری ارز با ریال Exr" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="nwColumn" Binding="{Binding Nw,UpdateSourceTrigger=LostFocus}" Header="وزن خالص Nw" Width="auto"/>
                    <DataGridTextColumn x:Name="ssrvColumn" Binding="{Binding Ssrv,UpdateSourceTrigger=LostFocus}" Header="ارزش ریالی کالا Ssrv" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="sscvColumn" Binding="{Binding Sscv,UpdateSourceTrigger=LostFocus}" Header="ارزش ارزی کالا Sscv" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="cfeeColumn" Binding="{Binding Cfee,UpdateSourceTrigger=LostFocus}" Header="میزان ارز Cfee" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="cutColumn" Binding="{Binding Cut,UpdateSourceTrigger=LostFocus}" Header="نوع ارز Cut" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="odtColumn" Binding="{Binding Odt,UpdateSourceTrigger=LostFocus}" Header="موضوع سایرمالیات و عوارض Odt" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="odrColumn" Binding="{Binding Odr,UpdateSourceTrigger=LostFocus}" Header="نرخ سایرمالیات و عوارض Odr" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="odamColumn" Binding="{Binding Odam,UpdateSourceTrigger=LostFocus}" Header="مبلغ سایرمالیات و عوارض Odam" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="oltColumn" Binding="{Binding Olt,UpdateSourceTrigger=LostFocus}" Header="موضوع سایر وجوه قانونی Olt" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="olrColumn" Binding="{Binding Olr,UpdateSourceTrigger=LostFocus}" Header=" نرخ سایر وجوه قانونی Olr" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="olamColumn" Binding="{Binding Olam,UpdateSourceTrigger=LostFocus}" Header="مبلغ سایر وجوه قانونی Olam" Width="auto"/>
                    <DataGridTextColumn x:Name="consfeeColumn" Binding="{Binding Consfee,UpdateSourceTrigger=LostFocus}" Header="اجرت ساخت Consfee" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="sproColumn" Binding="{Binding Spro,UpdateSourceTrigger=LostFocus}" Header=" سود فروشنده Spro" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="brosColumn" Binding="{Binding Bros,UpdateSourceTrigger=LostFocus}" Header="حق العمل Bros" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="tcpbsColumn" Binding="{Binding Tcpbs,UpdateSourceTrigger=LostFocus}" Header="جمع كل اجرت، حق-العمل و سود Tcpbs" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="copColumn" Binding="{Binding Cop,UpdateSourceTrigger=LostFocus}" Header="سهم نقدی از پرداخت Cop" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="vopColumn" Binding="{Binding Vop,UpdateSourceTrigger=LostFocus}" Header="سهم ارزش افزوده از پرداخت Vop" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="bsrnColumn" Binding="{Binding Bsrn,UpdateSourceTrigger=LostFocus}" Header="شناسه یکتای ثبت قرارداد حق العملکاری Bsrn" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="iinnColumn" Binding="{Binding Iinn,UpdateSourceTrigger=LostFocus}" Header="شماره سوییچ پرداخت Iinn" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="acnColumn" Binding="{Binding Acn,UpdateSourceTrigger=LostFocus}" Header="شماره پذیرنده فروشگاهی Acn" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="trmnColumn" Binding="{Binding Trmn,UpdateSourceTrigger=LostFocus}" Header="شماره پایانه Trmn" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="trnColumn" Binding="{Binding Trn,UpdateSourceTrigger=LostFocus}" Header="شماره پیگیری Trn" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="pcnColumn" Binding="{Binding Pcn,UpdateSourceTrigger=LostFocus}" Header="شماره كارت پرداخت كننده صورتحساب Pcn" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="pdtColumn" Binding="{Binding Pdt,UpdateSourceTrigger=LostFocus}" Header="تاریخ و زمان پرداخت صورتحساب Pdt" Width="auto" IsReadOnly="True" />
                    <DataGridTextColumn x:Name="cdcnColumn" Binding="{Binding Cdcn,UpdateSourceTrigger=LostFocus}" Header="Cdcn" Width="auto" IsReadOnly="True" />
                </DataGrid.Columns>
            </DataGrid>

            <!-- ===== Totals + Button ===== -->
            <StackPanel Grid.Row="3">
                <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft" Margin="10">
                    <!--<Label Content="تعداد رکورد ها:" FlowDirection="RightToLeft" />
                    <TextBlock x:Name="ROWCOUNT_TEXTBLK" Text="" FlowDirection="RightToLeft" Width="230" HorizontalAlignment="Right" Height="23"/>
                    <TextBlock Text="{Binding DG_BODY_INVOICE.Items.Count,UpdateSourceTrigger=PropertyChanged}"/>-->
                    <TextBlock x:Name="TAXID_LABEL" Text=""/>
                </StackPanel>

                <StackPanel Orientation="Vertical" FlowDirection="RightToLeft" Margin="10,-5,14,10">
                    <TextBlock x:Name="TotalAmountText" Text="جمع کل: 0" FontWeight="Bold"/>
                    <TextBlock x:Name="TotalDiscountText" Text="جمع تخفیف: 0" FontWeight="Bold"/>
                    <TextBlock x:Name="TotalVatText" Text="جمع مالیات: 0" FontWeight="Bold"/>
                    <TextBlock x:Name="GrandTotalText" Text="مبلغ نهایی: 0" FontWeight="Bold" Foreground="DarkGreen"/>
                </StackPanel>

                <UniformGrid Margin="10,-6,10,16">
                    <Button x:Name="BTN_SEND"
                    Click="BTN_SEND_Click"
                    Content="ارسال این صورت حساب"
                    Style="{StaticResource MaterialDesignOutlinedButton}"/>
                </UniformGrid>
            </StackPanel>
        </Grid>


    </Grid>
</Window>
